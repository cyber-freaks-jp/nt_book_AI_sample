# シナリオテスト仕様書の自動生成

シナリオテストとは、要件定義書の内容を満たしているか？を最終チェックするテストです。

ユニットテストや統合テストはAIで自動化できますが、最終的な受け入れテスト（シナリオテスト）は人間が実施する必要があります。しかし、その**テスト仕様書**はAIで自動生成できます。

## 要件定義書と設計書の両方を活用する

シナリオテスト仕様書を生成する際、**要件定義書だけでなく設計書も参照させる**ことで、より詳細で実用的なテスト仕様書を作成できます。

### 要件定義書だけでは不十分な理由

要件定義書だけを参照すると、以下のような情報が不足します：

- **どういう振る舞いになれば正しいのか**（具体的なAPI仕様、画面遷移）
- **どういう実行手順でテストすれば良いのか**（具体的なボタン名、URL、パラメータ）
- **期待結果の詳細**（レスポンスステータスコード、エラーメッセージの具体的な文言）

設計書を追加で参照させることで、これらの具体的な情報を含んだテスト仕様書を生成できます。

## ECサイトのシナリオテスト仕様書を生成する

ECサイトの決済機能を例に、要件定義書と設計書の両方を活用してシナリオテスト仕様書を生成します。

### 要件定義書と設計書を参照させる

```
プロンプト：
「@docs/要件定義書.md と @docs/設計書.md をもとに、
決済機能のシナリオテスト仕様書を作成してください。

テスト仕様書は docs/シナリオテスト仕様書.md に出力してください。

以下の形式で記述してください：
- テストケースID
- テストケース名
- 事前条件
- テスト手順（具体的な操作を番号付きリストで）
- 期待結果（具体的なステータスコード、メッセージ、画面遷移を含む）
- 実施者欄
- 実施日欄
- 結果欄（OK/NG）

設計書の仕様（API仕様、画面仕様、エラーメッセージ）を参照し、
具体的な実行手順と期待結果を記述してください。

要件定義書の全ての機能要件をカバーしてください。
正常系・異常系・エッジケースを含めてください。」
```

### 生成されるテスト仕様書の例

AIが以下のような詳細なテスト仕様書を生成します：

```markdown
# シナリオテスト仕様書：ECサイト決済機能

## TC001：クレジットカード決済（正常系）


### テスト手順
1. ブラウザで https://test.example.com/cart にアクセス
2. カート内の「購入手続きへ」ボタンをクリック

### 期待結果
- HTTPステータスコード：200（決済成功）
- 決済完了画面（/order/complete）に遷移する
```

仕様書はExcelではなくマークダウンで出力されますが、無理にExcelに変換するよりも、マークダウンのまま、「結果：NG」などと記入していくのがおすすめです

マークダウンなら、「結果NGの部分のバグを直して」とAIに修正依頼を出しやすいなどのメリットがあります

## シナリオテスト仕様書もGitで管理

シナリオテスト仕様書もマークダウン形式なので、Gitで管理できます。
これにより、過去のテスト結果も追跡でき、問題が発生した際に過去の状態と比較できます。
