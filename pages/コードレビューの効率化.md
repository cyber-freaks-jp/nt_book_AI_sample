# コードレビューの効率化

**AIを活用することで、コードレビューの効率と品質を大幅に向上させることができます。**

## ECサイトの決済機能をレビューしてみよう

実装したECサイトの決済機能を、AIにレビューさせます。

まずは基本的な使い方から始めましょう。

### 基本的なコードレビュー


```
プロンプト：
「@backend/src/routes/payment.ts をコードレビューしてください。

以下の観点でチェックしてください：
- コードの品質（可読性、保守性、命名規則）
- エラーハンドリング
- セキュリティ
- パフォーマンス

問題があれば、重要度別（重大・警告・推奨）に分けて、
具体的な改善案を提示してください。」
```

AIが以下のようにレビュー結果を返します：

```markdown
## コードレビュー結果

### 【重大】セキュリティ問題

1. **環境変数の不適切な扱い**
   - 問題箇所：5行目
   - `process.env.STRIPE_SECRET_KEY!` で強制的にnon-nullにしている
   - 改善案：環境変数の存在チェックを追加

---

### 【警告】エラーハンドリング

Stripe APIのエラーハンドリングが不足しています。
try-catch で適切にハンドリングを追加してください。

```

### 設計書・要件定義書との整合性チェック

設計書や要件定義書がある場合、それらと実装コードを比較してレビューできます。

```
プロンプト：
「@docs/要件定義書.md と @docs/設計書.md と @backend/src/routes/payment.ts を確認してください。

以下をチェックしてください：
1. 設計書の仕様と実装に齟齬がないか
2. 要件定義書の要件を満たしているか

問題があれば具体的に指摘してください。」
```

### AIに修正を実装させる

レビュー結果を受けて、そのままAIに修正を依頼できます。

```
プロンプト：
「先ほど指摘した【重大】と【警告】の問題をすべて修正してください。」
```

AIが自動で修正してくれます。

## 人間による最終レビュー

AIのレビュー結果を参考に、**人間が最終的にレビューします。**

AIはあくまで、あなたの助手。コードの責任者はAIではなく、あなたです。
最終的にはしっかりと人間がレビューしましょう


## ワンランク上の使い方：Git/GitHubとの連携

ここからは、Git/GitHubと連携したより高度なレビュー方法を紹介します。

### ブランチ単位での包括的レビュー

通常、Gitでは機能ごとにブランチを切って開発します。レビュー時は、**そのブランチ全体をまとめてAIにレビューさせる**ことができます。

なお、このような使い方をするために、**AIが動作する環境に**gitをインストールしておきましょう。また、APIやMCPで接続できるようにしておくと、AIがGitHubにコメントを残すなどの操作が可能になります。

```
プロンプト：
「決済機能を実装したので、コードレビューしてください。

以下を参照してレビューしてください：
- このブランチの全変更（git diff main...HEAD）

問題があれば、重要度別（重大・警告・推奨）に分けてレポートしてください。

レポート結果はgithubのPR(#34)にコメントを残してください。」
```

このように指示すると、AIが：
1. ブランチ全体の変更を確認
2. レビューを実施
3. 結果をGitHubのPRに自動でコメント

という一連の作業を自動で行ってくれます。

### GitHub Actionsでレビューを自動化

さらに、GitHub Actionsを使うことで、プルリクエストが作成されるたびに自動でAIレビューが実行されるように設定できます。

## まとめ

AIでレビューの生産性が大幅に向上します。
ただし最終的には、人間がしっかりとレビューをしましょう
