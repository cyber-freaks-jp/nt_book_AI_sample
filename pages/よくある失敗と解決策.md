# よくある失敗と解決策

ここれは、よくある失敗（アンチパターン）と、解決策を見ていきましょう

## 心構えの失敗

### 【アンチパターン1】AIの回答を理解せず「バグを直せ」と繰り返す

エラー解決の場面で最も多い失敗パターンが、AIの回答をまともに見ようともせず、理解しようともせずに、「バグを直せ」と繰り返すことです。この行動は無限ループを引き起こし、時間もお金（AIのトークンコスト）も浪費する結果に終わります。

**失敗例：無限ループパターン**

```
あなた: エラーが出ています。直してください。
AI: エラーを修正しました
あなた: まだエラーが出ます。直してください。
AI: エラーを修正しました
あなた: 動きません。直してください。
AI: エラーを修正しました
（この後も延々と続く）
```

**⚠️ 警告：この失敗は、AIではなく、あなたの問題です**

#### 最も重要な原則：AIは主役ではなくサポート役。主役はあなた

AI駆動開発で最初に理解すべきことは、**AIはあくまでサポート役であり、主役はあなた**だということです。AIに丸投げしてはいけません。最終的な判断・理解はあなたの責任です。

そして、これは絶対的な原則です。あなた自身が理解しようとせずにAIに仕事を丸投げすることは、プロフェッショナルなエンジニアとして許されません。

#### 必須のサイクル：理解→指示→理解→指示

AI駆動開発では、以下のサイクルを絶対に守る必要があります：

1. **自分自身がちゃんと理解した上でAIに指示を出す**
2. **AIが出してきた回答に対してしっかりと理解・読解した上で次の指示を適切に出す**

AIはあなたの部下だと思ってください。
あなたは部下に仕事を丸投げするだけの上司になってはいけません。

AIに対して、明確かつ適切な指示を出し、その結果をチェックすることが、あなたの仕事です

３回のやり取りで解決しなければ、このアンチパターンを疑ってください。

**問題点の本質**：

- **理解のサイクルが完全に欠如している** - AIの回答を読んでいない、理解していない
- **自分自身が問題を理解していない** - エラーの原因を考えていない
- **AIに丸投げしている** - 主導権を完全に放棄している

#### AIモデル変更による問題解決

**理解した上でのモデル変更は、強力な武器です**

AIとのやり取りで問題が解決しない場合、重要なのは以下の順序です：

1. **AIの回答をしっかりと理解する** 
2. **AIの回答の精度を判断する** - しっかりと理解することで、AIの言っていることが正しいか間違っているかを判断する

この心構えでAIと向き合うことで、「このAIモデルがこの問題を解決できるか」を判断できるようになります。これこそがプロのエンジニアの判断力です。

**プロのエンジニアは、AIの限界を見極めることができます**

その結果、「このAIモデルではこの問題を解決できない」と判断できたら、別の高性能なAIモデルに切り替えましょう。これはとても有効な手段です。

- Claude 3.5 Sonnetで解決しない → Claude 3 Opus や GPT-4o に切り替える、など

**理解せずにモデルを変更しても意味がありません**。理解していない状態でモデルを変更しても、同じ無限ループが繰り返されるだけです。逆に、しっかりと理解した上でのモデル変更は、問題解決の突破口になります。

AIの出力結果をしっかりとレビューし判断する。そういったAIの限界の見極めができるプロフェッショナルを目指しましょう。

### 【アンチパターン2】AIに責任を押し付ける

**失敗例**：

```
先輩: このコード、バグってるけど？
あなた: これはAIが生成したコードなので、自分では詳しくわかりません。
```

このような心構えは、プロとして失格です。
AIはあなたの部下です。つまりAIの責任はあなたの責任です。

AIが生成したコードについては、100%あなたが責任を持ってレビューやテストをしましょう

また、あなたのAIが暴走して本番環境を壊してしまっても、使い方を誤ったあなたの責任です。
リスク管理もしっかりと行いましょう

**問題点**：

- プロとして失格。エンジニアとして無価値
- バグが起きると周囲に迷惑がかかる
- チームメンバーからの信頼を失う

**解決策**：

- AIが生成したコードであっても、100%あなたの責任でレビューとテストを行う

## プロンプトに関する失敗

### 【アンチパターン3】曖昧な指示を出してしまう

**失敗例**：

```
ログイン機能を作って
```

このような漠然とした指示では、AIは必要な詳細情報がなく、汎用的な解答しか返せません。

**解決策**：

- 可能な限り明確に指示する。明確さは力なり

**改善例**：

```
React、TypeScript、Firebase Authenticationを使ったログイン機能を実装してください。
必要な機能:
- メールアドレスとパスワードによるログイン
- Googleアカウントによるソーシャルログイン
- ログイン状態の永続化
- パスワードリセット機能
既存のプロジェクトではReact Router v6を使用しています。
```

### 【アンチパターン4】必要なコンテキストを提供しない

**失敗例**：

```
このバグを修正して
[コード片]
```

AIには、プロジェクトの全体像や発生しているエラーなどの背景情報がわかりません。

**解決策**：

- 可能な限り詳細なコンテキストを与える
	- エラーメッセージを含める
	- バグが発生する状況を説明する
	- 関連するコードも提供する
	- プロジェクトの構造やアーキテクチャについて説明する

**改善例**：

```
以下のReactコンポーネントでエラーが発生しています：
エラーメッセージ: "TypeError: Cannot read properties of undefined (reading 'map')"

問題のコード:
[コード]

このコンポーネントはAPIからデータをフェッチしてリスト表示します。
エラーはページ初回ロード時に発生します。
```

### 【アンチパターン5】一度に複雑すぎる要求をする

**失敗例**：

```
ECサイトを作成して。
ユーザー認証、商品一覧、カート機能、決済機能、管理画面など全機能作って。
```

AIは大きすぎるタスクに対して全体を把握しづらく、不完全な回答になりがちです。

**解決策**：

- タスクを小さなステップに分割する。分割は力なり
- 段階的に実装を進める

**改善例**：

```
Eコマースサイトを構築するプロジェクトの第一段階として、まず全体のアーキテクチャと技術スタックについて相談させてください。その後、各モジュールを個別に実装していきたいと思います。
```


## セキュリティに関する失敗

### 【アンチパターン6】機密情報を AIに提供してしまう

**失敗例**：

AIに機密情報を渡してしまい、その結果インターネット上で情報が漏洩してしまう

**解決策**：

- 機密情報はマスクまたは削除する（例：`API_KEY_XXXXX`）
- そもそもAIの目の届く場所に機密情報を置かない(AIは隔離されたサンドボックス環境内で利用する)
- .cursorignoreなど各AIツールの設定で、AIが機密情報を読み取らない設定を行う

## コスト・効率性に関する失敗

### 【アンチパターン7】巨大なファイルを繰り返しAIに送信する

**失敗例**：

画像や膨大なログファイルなど、大容量のインプットトークンをAIに渡した結果、AIの利用料金が高くなってしまう

**問題点**：

- AIコストが高額になる
- AIのレスポンス速度が遅くなる

**解決策**：

必要な部分だけを抽出して送信します。ファイル全体ではなく、必要な部分のみを共有することで、トークン消費を大幅に削減できます。
